var Interjet=Interjet||{};Interjet.Connector=function(t){var t=t||{};this.connector=!1,this.connectorLoaded=!1,this.queue=[],this.options={provider:"http://api.example.com/user/auth",id:"InterjetConnector",origin:null,autoLoad:!0,onMessage:function(t){}};for(var e in t)this.options[e]=t[e];this.handleResponse=function(t){this.options.origin!==t.origin&&this.options.provider||this.options.onMessage.call(this,t)},this.getHostOrigin=function(){var t=document.createElement("a");t.href=this.options.provider,this.options.origin=[t.protocol,t.host].join("//")},this.load=function(){var t=document.createElement("iframe");t.setAttribute("src",this.options.provider),t.setAttribute("id",this.options.id),t.style.width="0px",t.style.height="0px",t.style.border="0px",document.body.appendChild(t),t.addEventListener("load",function(){this.connectorLoaded=!0,this.send()}.bind(this)),this.connector=t.contentWindow},this.addQueueMessage=function(t){this.queue.push(t)},this.addQueueMessages=function(t){this.queue.concat(t)},this.send=function(t,e){if(this.connectorLoaded){var n=e||this.connector;t?n.postMessage(t,"*"):this.queue.forEach(function(t,e){n.postMessage(t,"*"),this.queue.splice(e,1)}.bind(this))}else this.queue.push(t)},this.ready=function(t){(document.attachEvent?"complete"===document.readyState:"loading"!==document.readyState)?t():document.attachEvent?document.attachEvent("onDOMContentLoaded",t):document.addEventListener("DOMContentLoaded",t,!1)},this.options.autoLoad&&this.options.provider?this.ready(this.load.bind(this)):this.connectorLoaded=!0,window.addEventListener?window.addEventListener("message",this.handleResponse.bind(this),!1):window.attachEvent("onmessage",this.handleResponse.bind(this)),this.options.provider&&this.getHostOrigin()};